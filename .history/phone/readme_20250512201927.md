# 空号生成工具需求文档

## 一、项目背景

随着电话营销、测试系统、应用程序开发等场景的需求增加，对于模拟真实却不存在的电话号码（即"空号"）的需求也随之提高。该工具旨在提供一个简便的方式，生成符合中国大陆电信运营商号码规则但实际并未被分配使用的电话号码，即"空号"。

## 二、功能需求

### 1. 核心功能
- 随机生成符合中国大陆手机号码格式的电话号码
- 确保生成的号码为"空号"（未被实际使用的号码）
- 确保生成号码的唯一性，不重复
- 支持批量生成指定数量的空号

### 2. 技术要求
- 基于国内三大运营商（移动、联通、电信）的号段规则生成号码
- 避开已知的已分配号段和特殊号段
- 实现高性能的重复检测机制
- 具备良好的随机性

### 3. 输入参数
- 生成号码的数量（范围：1-10000）
- 指定运营商（可选：全部、移动、联通、电信）
- 是否指定号段前缀（可选）
- 是否使用某些固定数字（可选）
- 输出格式设置（普通文本、CSV、Excel等）

### 4. 输出内容
- 生成的空号列表
- 每个号码的运营商归属信息
- 生成时间戳
- 是否导出到文件

## 三、号码生成规则

### 1. 中国大陆手机号码基本规则
- 总长度：11位数字
- 号段规则：
  - 移动：134-139, 147-149, 150-152, 157-159, 165, 172, 178, 182-184, 187-188, 195-198
  - 联通：130-132, 145-146, 155-156, 166, 167, 171, 175-176, 185-186, 196
  - 电信：133, 149, 153, 173-174, 177, 180-181, 189, 190-193, 199

### 2. 空号判定策略
- 避开已知分配的号段（如：运营商已公布的实号段）
- 避开特殊号码（如：规律性号码、内部测试号段等）
- 随机生成符合格式但实际未使用的号码

### 3. 唯一性保证策略
- 使用高效数据结构存储已生成号码
- 生成新号码时进行查重
- 必要时采用批量预生成+过滤的策略提高效率

## 四、系统架构

### 1. 模块设计
- 号码规则管理模块：维护运营商号段规则和更新机制
- 随机号码生成模块：基于规则生成候选号码
- 空号验证模块：验证号码是否为空号
- 唯一性检查模块：确保生成号码不重复
- 输出格式化模块：按需格式化输出结果

### 2. 数据流程
- 接收用户输入参数
- 根据参数和规则生成候选号码
- 验证候选号码是否符合空号条件
- 检查是否与已生成号码重复
- 通过验证后添加到结果集
- 格式化输出结果

## 五、接口设计

### 1. 命令行接口
```
python generate_empty_numbers.py --count 100 --operator all --output csv
```

### 2. 函数接口
```python
def generate_empty_numbers(count=1, operator="all", prefix=None, output_format="text"):
    """
    生成指定数量的空号
    
    参数:
    count (int): 要生成的空号数量
    operator (str): 运营商类型 ("all", "mobile", "unicom", "telecom")
    prefix (str): 指定号码前缀 (可选)
    output_format (str): 输出格式 ("text", "csv", "excel")
    
    返回:
    list: 生成的空号列表
    """
```

### 3. Web接口（可选扩展）
- REST API设计
- 支持批量请求
- 提供Web界面方便用户操作

## 六、性能指标

- 单次生成1000个号码的时间不超过5秒
- 内存占用不超过200MB（生成10000个号码时）
- 重复率：0%（严格保证唯一性）

## 七、扩展功能（可选）

- 支持国际电话号码格式
- 空号验证API集成（如有可用的商业API）
- 生成历史记录管理
- 定制化号码生成（如：指定尾号、指定数字组合等）
- 号码归属地信息附加

## 八、使用示例

### 示例1: 生成100个移动空号
```
> python generate_empty_numbers.py --count 100 --operator mobile
生成成功，100个移动空号已保存至output.txt
```

### 示例2: 生成带特定前缀的空号
```
> python generate_empty_numbers.py --count 50 --prefix 1390 --output excel
生成成功，50个以1390开头的空号已保存至empty_numbers_20230615.xlsx
```

## 九、注意事项

- 本工具生成的号码仅用于测试、开发等合法用途
- 不保证生成号码的绝对空号性（理论上存在小概率的误判）
- 禁止用于骚扰电话、诈骗等违法行为
- 建议定期更新号段规则库以提高空号判定准确性

---

_本文档仅作为开发参考，实际实现可能需要根据技术条件和实际需求进行调整。_ 